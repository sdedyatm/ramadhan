<!DOCTYPE html>
<html lang="id">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <meta name="theme-color" content="#0f172a">
  <title>CCTV Traffic Pro Dashboard</title>

  <!-- Tailwind CSS (WAJIB untuk tampilan rapi) -->
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdn.jsdelivr.net/npm/hls.js@1.6.15/dist/hls.min.js"></script>

  <link rel="manifest" href="data:application/manifest+json;base64,ewogICJuYW1lIjogIlRyYWZmaWMgTW9uaXRvciIsCiAgInNob3J0X25hbWUiOiAiVHJhZmZpY1BXQSIsCiAgInN0YXJ0X3VybCI6ICIuIiwKICAiZGlzcGxheSI6ICJzdGFuZGFsb25lIiwKICAiYmFja2dyb3VuZF9jb2xvciI6ICIjMGYxNzJhIiwKICAidGhlbWVfY29sb3IiOiAiIzBmMTcyYSIsCiAgImljb25zIjogWwogICAgewogICAgICAic3JjIjogImh0dHBzOi8vaW1nLmljb25zOC5jb20vYm9sa29vbi81MTIvY2N0di1jYW1lcmEucG5nIiwKICAiIHNpemVzIjogIjUxMng1MTIiLAogICAgICAidHlwZSI6ICJpbWFnZS9wbmciCiAgICB9CiAgXQp9">

  <style>
    @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');

    body {
      font-family: 'Inter', system_ui, sans-serif;
    }

    .video-wrapper {
      position: relative;
      width: 100%;
      max-width: 100%;
      aspect-ratio: 16 / 9;
      background: #000;
      border-radius: 20px;
      overflow: hidden;
      box-shadow: 0 25px 60px -15px rgba(0, 0, 0, 0.9);
    }

    .custom-scroll::-webkit-scrollbar {
      width: 5px;
    }

    .custom-scroll::-webkit-scrollbar-thumb {
      background: #475569;
      border-radius: 20px;
    }

    .submenu-container {
      max-height: 0;
      overflow: hidden;
      opacity: 0;
      transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
    }

    .submenu-container.open {
      max-height: 1200px;
      opacity: 1;
    }

    .live-badge {
      animation: pulse 2s infinite;
    }

    @keyframes pulse {

      0%,
      100% {
        opacity: 1;
      }

      50% {
        opacity: 0.7;
      }
    }
  </style>
</head>

<body class="bg-slate-950 text-slate-100 min-h-screen flex flex-col overflow-hidden">
  <!-- HEADER -->
  <header class="px-4 py-4 bg-slate-900/95 backdrop-blur-xl border-b border-slate-800 flex items-center justify-between z-50">
    <div class="flex items-center gap-3">
      <div class="w-10 h-10 bg-gradient-to-br from-blue-600 to-indigo-600 rounded-2xl flex items-center justify-center shadow-lg">
        <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2.5">
          <path d="M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z" />
        </svg>
      </div>
      <div>
        <h1 class="text-2xl font-bold tracking-tighter">CCTV<span class="text-blue-500">ATM</span></h1>
        <p id="status-bar" class="text-xs font-mono text-emerald-400">CCTV LIVE SYSTEM </p>
      </div>
    </div>
    <div class="flex items-center gap-2 text-emerald-400 text-sm font-medium">
      <div class="w-3 h-3 bg-emerald-500 rounded-full animate-pulse"></div>
      ONLINE
    </div>
  </header>

  <main class="flex-1 flex flex-col lg:flex-row overflow-hidden">
    <!-- VIDEO AREA (lebih besar & rapi di HP) -->
    <section class="flex-1 flex items-center justify-center bg-slate-950 p-4 lg:p-8">
      <div class="video-wrapper w-full max-w-4xl mx-auto group" id="video-box">
        <!-- Logo lebih besar -->
        <div class="absolute top-4 right-4 z-40">
          <img src="https://lh3.googleusercontent.com/pw/AP1GczM7DIcF6n6QmapKYKmLrjE1jfdzglHj5YotQm27QErAplykPvCq3qZDbhw3qfrzTenf75srCib_6DH_WMZ-9OioIbjLVf8zb9ehkfA6GeGPPTa8wYiNTO4BvdS0VnMemmusXQsUTJB_S1FvKaNr2p3BRA=w600-h600-s-no-gm?authuser=0" class="w-10 h-10 grayscale opacity-75 hover:opacity-100 transition-all" alt="Logo">
        </div>

        <!-- LIVE Badge -->
        <div id="live-badge" class="hidden absolute top-4 left-4 z-40 px-4 py-1.5 bg-red-600/90 backdrop-blur-md rounded-full flex items-center gap-2 text-xs font-bold text-white shadow-xl live-badge">
          <div class="w-2 h-2 bg-white rounded-full animate-ping"></div>
          LIVE
        </div>

        <video id="main-video" class="w-full h-full object-cover" playsinline autoplay muted crossorigin="anonymous"></video>

        <!-- Overlay Bawah -->
        <div class="absolute bottom-0 left-0 right-0 p-6 bg-gradient-to-t from-black/90 to-transparent">
          <h2 id="display-title" class="text-lg font-semibold text-white">STANDBY MODE</h2>
          <p id="display-sub" class="text-xs text-slate-400 mt-1 font-mono">Pilih kamera di sebelah kanan</p>
        </div>

        <!-- Fullscreen Button -->
        <div class="absolute inset-0 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-all pointer-events-none">
          <button onclick="app.toggleFS()" class="pointer-events-auto p-5 bg-white/10 hover:bg-white/20 backdrop-blur-3xl border border-white/30 rounded-3xl transition-all">
            <svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path d="M4 8V4m0 0h4M4 4l5 5m11-1V4m0 0h-4m4 0l-5 5M4 16v4m0 0h4m-4 0l5-5m11 5l-5-5m5 5v-4m0 4h-4" stroke-width="2.5" />
            </svg>
          </button>
        </div>

        <!-- Loader -->
        <div id="loader" class="absolute inset-0 hidden flex items-center justify-center bg-black/80 z-50">
          <div class="text-center">
            <div class="w-12 h-12 border-4 border-blue-500 border-t-transparent rounded-full animate-spin mx-auto"></div>
            <p class="text-xs font-mono text-blue-400 mt-4 tracking-widest">SYNCING STREAM...</p>
          </div>
        </div>
      </div>
    </section>

    <!-- SIDEBAR MENU -->
    <aside class="w-full lg:w-96 bg-slate-900 border-l border-slate-800 flex flex-col h-full max-h-screen overflow-hidden">
      <div class="p-5 border-b border-slate-800">
        <div class="relative">
          <input type="text" id="cctv-search" placeholder="Cari ruas jalan atau kota..." class="w-full bg-slate-800 border border-slate-700 focus:border-blue-500 rounded-2xl px-5 py-4 text-sm outline-none">
          <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5 text-slate-500 absolute right-5 top-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M21 21l-6-6m2-5a7 7 0 01-14 0 7 7 0 0114 0z" />
          </svg>
        </div>
      </div>

      <div id="menu-container" class="flex-1 overflow-y-auto custom-scroll p-5 space-y-5"></div>
    </aside>
  </main>

  <script>
    // === DATA KATEGORI (LENGKAP 100%) ===
    const categories = [{
        id: 'cikampek',
        name: 'CIKAMPEK',
        icon: 'ðŸ›£ï¸',
        subs: [{
            name: 'Gerbang Utama',
            url: 'https://jmlive.jasamarga.com/hls/5/71eddb82-0986-464a-b121-1317b4513685/index.m3u8'
          },
          {
            name: 'Klari Krwg',
            url: 'https://its.binamarga.pu.go.id:8989/play/hls/CT-09/index.m3u8'
          },
          {
            name: 'Simpang Dawuan',
            url: 'https://its.binamarga.pu.go.id:8989/play/hls/CT-10/index.m3u8'
          },
          {
            name: 'Cikampek Utama',
            url: 'https://cctv.jasamarga.com/hls/cikatama.m3u8'
          },
          {
            name: 'Flyover Martadinata',
            url: 'https://cctv.jasamarga.com/hls/martadinata.m3u8'
          }
        ]
      },
      {
        id: 'bandung',
        name: 'KAWASAN BIC',
        icon: 'ðŸ™ï¸',
        subs: [{
            name: 'ISL',
            url: 'https://cctv.jasamarga.com/hls/pasteur.m3u8'
          },
          {
            name: 'FURUKAWA',
            url: 'https://cctv.jasamarga.com/hls/cileunyi.m3u8'
          },
          {
            name: 'SARIROTI',
            url: 'https://cctv.bandung.go.id/hls/pasupati.m3u8'
          },
          {
            name: 'INDOMARCO',
            url: 'https://cctv.jasamarga.com/hls/gedebage.m3u8'
          },
          {
            name: 'HINO',
            url: 'https://cctv.jasamarga.com/hls/buahbatu.m3u8'
          }
        ]
      },
      {
        id: 'japek',
        name: 'TOL JAPEK',
        icon: 'ðŸ›£ï¸',
        subs: [{
            name: 'KM 10 Cikunir',
            url: 'https://cctv.jasamarga.com/hls/km10.m3u8'
          },
          {
            name: 'KM 21 Tambun',
            url: 'https://cctv.jasamarga.com/hls/km21.m3u8'
          },
          {
            name: 'KM 31 Cikarang',
            url: 'https://cctv.jasamarga.com/hls/km31.m3u8'
          },
          {
            name: 'KM 47 Karawang',
            url: 'https://cctv.jasamarga.com/hls/km47.m3u8'
          },
          {
            name: 'Layang MBZ',
            url: 'https://cctv.jasamarga.com/hls/mbz.m3u8'
          }
        ]
      },
      {
        id: 'tangmer',
        name: 'TOL TANGERANG MERAK',
        icon: 'ðŸšš',
        subs: [{
            name: 'Bitung',
            url: 'https://cctv.astratol.co.id/hls/bitung.m3u8'
          },
          {
            name: 'Balaraja Barat',
            url: 'https://cctv.mms-corp.id/balbar-exit/index.m3u8'
          },
          {
            name: 'Exit Merak',
            url: 'https://cctv.mms-corp.id/merak-exit/index.m3u8'
          },
          {
            name: 'Serang Timur',
            url: 'https://cctv.astratol.co.id/hls/serang.m3u8'
          },
          {
            name: 'Cilegon Barat',
            url: 'https://cctv.astratol.co.id/hls/cilegon.m3u8'
          }
        ]
      },
      {
        id: 'merak',
        name: 'MERAK',
        icon: 'ðŸš¢',
        subs: [{
            name: 'Dermaga Eksekutif',
            url: 'https://stream.asdp.id/hls/merak-eksekutif.m3u8'
          },
          {
            name: 'Dermaga 1',
            url: 'https://stream.asdp.id/hls/merak1.m3u8'
          },
          {
            name: 'Dermaga 2',
            url: 'https://stream.asdp.id/hls/merak2.m3u8'
          },
          {
            name: 'Pintu Masuk Port',
            url: 'https://stream.asdp.id/hls/gate-merak.m3u8'
          },
          {
            name: 'Area Parkir',
            url: 'https://stream.asdp.id/hls/parkir-merak.m3u8'
          }
        ]
      },
      {
        id: 'bojonegara',
        name: 'BOJONEGARA',
        icon: 'âš“',
        subs: [{
            name: 'Gate Utama',
            url: 'https://cctv.pelindo.co.id/bojonegara1.m3u8'
          },
          {
            name: 'Area Logistik',
            url: 'https://cctv.pelindo.co.id/bojonegara2.m3u8'
          },
          {
            name: 'Dermaga',
            url: 'https://cctv.pelindo.co.id/bojonegara3.m3u8'
          },
          {
            name: 'Jalur Akses',
            url: 'https://cctv.pelindo.co.id/bojonegara4.m3u8'
          },
          {
            name: 'Pergudangan',
            url: 'https://cctv.pelindo.co.id/bojonegara5.m3u8'
          }
        ]
      },
      {
        id: 'indramayu',
        name: 'INDRAMAYU',
        icon: 'ðŸŒ¾',
        subs: [{
            name: 'Pantura Lohbener',
            url: 'https://dishub.indramayukab.go.id/lohbener.m3u8'
          },
          {
            name: 'Jatibarang',
            url: 'https://dishub.indramayukab.go.id/jatibarang.m3u8'
          },
          {
            name: 'Karangampel',
            url: 'https://dishub.indramayukab.go.id/karangampel.m3u8'
          },
          {
            name: 'Eretan',
            url: 'https://dishub.indramayukab.go.id/eretan.m3u8'
          },
          {
            name: 'Losarang',
            url: 'https://dishub.indramayukab.go.id/losarang.m3u8'
          }
        ]
      },
      {
        id: 'cirebon',
        name: 'CIREBON',
        icon: 'ðŸ¯',
        subs: [{
            name: 'Plumbon',
            url: 'https://cctv.jasamarga.com/hls/plumbon.m3u8'
          },
          {
            name: 'Kanci',
            url: 'https://cctv.jasamarga.com/hls/kanci.m3u8'
          },
          {
            name: 'Palimanan',
            url: 'https://cctv.jasamarga.com/hls/palimanan.m3u8'
          },
          {
            name: 'Plered',
            url: 'https://dishub.cirebonkota.go.id/plered.m3u8'
          },
          {
            name: 'Harjamukti',
            url: 'https://dishub.cirebonkota.go.id/harjamukti.m3u8'
          }
        ]
      },
      {
        id: 'semarang',
        name: 'SEMARANG',
        icon: 'ðŸ›ï¸',
        subs: [{
            name: 'Simpang Lima',
            url: 'https://cctv.semarangkota.go.id/simpang5.m3u8'
          },
          {
            name: 'Kaligawe',
            url: 'https://cctv.semarangkota.go.id/kaligawe.m3u8'
          },
          {
            name: 'Krapyak',
            url: 'https://cctv.jasamarga.com/hls/krapyak.m3u8'
          },
          {
            name: 'Jatingaleh',
            url: 'https://cctv.jasamarga.com/hls/jatingaleh.m3u8'
          },
          {
            name: 'Banyumanik',
            url: 'https://cctv.jasamarga.com/hls/banyumanik.m3u8'
          }
        ]
      },
      {
        id: 'surabaya',
        name: 'SURABAYA',
        icon: 'ðŸ¦ˆ',
        subs: [{
            name: 'Waru',
            url: 'https://cctv.jasamarga.com/hls/waru.m3u8'
          },
          {
            name: 'Gunung Sari',
            url: 'https://cctv.jasamarga.com/hls/gunungsari.m3u8'
          },
          {
            name: 'Dupak',
            url: 'https://cctv.jasamarga.com/hls/dupak.m3u8'
          },
          {
            name: 'Suramadu',
            url: 'https://dishub.surabaya.go.id/suramadu.m3u8'
          },
          {
            name: 'Perak',
            url: 'https://dishub.surabaya.go.id/perak.m3u8'
          }
        ]
      },
      {
        id: 'lampung',
        name: 'LAMPUNG',
        icon: 'ðŸ˜',
        subs: [{
            name: 'Bakauheni Port',
            url: 'https://stream.asdp.id/hls/bakauheni.m3u8'
          },
          {
            name: 'Kalianda',
            url: 'https://cctv.tol-lampung.com/v1/kalianda.m3u8'
          },
          {
            name: 'Terbanggi Besar',
            url: 'https://cctv.tol-lampung.com/v1/terbanggi.m3u8'
          },
          {
            name: 'Tegineneng',
            url: 'https://cctv.tol-lampung.com/v1/tegineneng.m3u8'
          },
          {
            name: 'Mesuji',
            url: 'https://cctv.tol-lampung.com/v1/mesuji.m3u8'
          }
        ]
      },
      {
        id: 'palembang',
        name: 'PALEMBANG',
        icon: 'ðŸŒ‰',
        subs: [{
            name: 'Ampera',
            url: 'https://dishub.palembang.go.id/ampera.m3u8'
          },
          {
            name: 'Jakabaring',
            url: 'https://dishub.palembang.go.id/jakabaring.m3u8'
          },
          {
            name: 'KM 12',
            url: 'https://cctv.hutamakarya.com/palembang12.m3u8'
          },
          {
            name: 'Kramasan',
            url: 'https://cctv.hutamakarya.com/kramasan.m3u8'
          },
          {
            name: 'Indralaya',
            url: 'https://cctv.hutamakarya.com/indralaya.m3u8'
          }
        ]
      },
      {
        id: 'jambi',
        name: 'JAMBI',
        icon: 'ðŸ…',
        subs: [{
            name: 'Simpang Rimbo',
            url: 'https://dishub.jambikota.go.id/rimbo.m3u8'
          },
          {
            name: 'Aur Duri',
            url: 'https://dishub.jambikota.go.id/aurduri.m3u8'
          },
          {
            name: 'Muara Bulian',
            url: 'https://dishub.jambikota.go.id/bulian.m3u8'
          },
          {
            name: 'Tugu Juang',
            url: 'https://dishub.jambikota.go.id/juang.m3u8'
          },
          {
            name: 'Sipin',
            url: 'https://dishub.jambikota.go.id/sipin.m3u8'
          }
        ]
      },
      {
        id: 'pekanbaru',
        name: 'PEKANBARU',
        icon: 'ðŸ›¢ï¸',
        subs: [{
            name: 'Simpang Bingung',
            url: 'https://dishub.pekanbaru.go.id/bingung.m3u8'
          },
          {
            name: 'Panam',
            url: 'https://dishub.pekanbaru.go.id/panam.m3u8'
          },
          {
            name: 'Rumbai',
            url: 'https://dishub.pekanbaru.go.id/rumbai.m3u8'
          },
          {
            name: 'Tol Permai',
            url: 'https://cctv.hutamakarya.com/permai.m3u8'
          },
          {
            name: 'Arengka',
            url: 'https://dishub.pekanbaru.go.id/arengka.m3u8'
          }
        ]
      },
      {
        id: 'medan',
        name: 'MEDAN',
        icon: 'ðŸ¢',
        subs: [{
            name: 'Amplas',
            url: 'https://atcs.medan.id/hls/amplas.m3u8'
          },
          {
            name: 'Belawan',
            url: 'https://cctv.jasamarga.com/hls/belawan.m3u8'
          },
          {
            name: 'Tanjung Morawa',
            url: 'https://cctv.jasamarga.com/hls/tamora.m3u8'
          },
          {
            name: 'Maimun',
            url: 'https://atcs.medan.id/hls/maimun.m3u8'
          },
          {
            name: 'Simpang Pos',
            url: 'https://atcs.medan.id/hls/simpangpos.m3u8'
          }
        ]
      }
    ];
    class TrafficApp {
      constructor() {
        this.video = document.getElementById('main-video');
        this.loader = document.getElementById('loader');
        this.liveBadge = document.getElementById('live-badge');
        this.hls = null;
        this.init();
      }
      init() {
        this.renderMenu();
        this.setupSearch();
        document.getElementById('status-bar').innerText = 'SYSTEM LIVE â€¢ ALL CAMERAS READY';
      }
      renderMenu() {
        const container = document.getElementById('menu-container');
        container.innerHTML = categories.map(cat => `
          <div class="category-group rounded-3xl bg-slate-900/50 border border-slate-800 overflow-hidden">
            <button onclick="app.toggleSub('${cat.id}')" class="w-full px-6 py-5 flex items-center justify-between hover:bg-slate-800 transition-colors">
              <div class="flex items-center gap-4 text-lg">
                <span>${cat.icon}</span>
                <span class="font-semibold">${cat.name}</span>
              </div>
              <svg id="icon-${cat.id}" class="w-5 h-5 transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M19 9l-7 7-7-7"/>
              </svg>
            </button>
            <div id="sub-${cat.id}" class="submenu-container px-3 pb-4 space-y-1">
              ${cat.subs.map(sub => `
                <button onclick="app.play('${cat.name}', '${sub.name}', '${sub.url}', this)" 
                        class="w-full text-left px-6 py-4 text-sm hover:bg-slate-800 rounded-2xl flex items-center gap-3 transition-all">
                  <span class="w-2 h-2 bg-slate-600 rounded-full"></span>
                  ${sub.name}
                </button>
              `).join('')}
            </div>
          </div>
        `).join('');
      }
      toggleSub(id) {
        const sub = document.getElementById(`sub-${id}`);
        const icon = document.getElementById(`icon-${id}`);
        const isOpen = sub.classList.contains('open');
        document.querySelectorAll('.submenu-container').forEach(el => el.classList.remove('open'));
        document.querySelectorAll('svg[id^="icon-"]').forEach(i => i.style.transform = 'rotate(0deg)');
        if (!isOpen) {
          sub.classList.add('open');
          icon.style.transform = 'rotate(180deg)';
        }
      }
      async play(cat, sub, url, btn) {
        this.loader.classList.remove('hidden');
        this.liveBadge.classList.add('hidden');
        document.querySelectorAll('#menu-container button').forEach(b => b.classList.remove('bg-blue-900/30', 'text-blue-400'));
        btn.classList.add('bg-blue-900/30', 'text-blue-400');
        document.getElementById('display-title').innerText = `${cat} â€¢ ${sub}`;
        document.getElementById('display-sub').innerText = url.split('/').pop();
        const config = {
          enableWorker: true,
          capLevelToPlayerSize: true,
          lowLatencyMode: true
        };
        if (this.hls) this.hls.destroy();
        if (Hls.isSupported()) {
          this.hls = new Hls(config);
          this.hls.loadSource(url);
          this.hls.attachMedia(this.video);
          this.hls.on(Hls.Events.MANIFEST_PARSED, () => {
            this.video.play();
            this.loader.classList.add('hidden');
            this.liveBadge.classList.remove('hidden');
          });
        } else {
          this.video.src = url;
          this.video.play();
          this.loader.classList.add('hidden');
          this.liveBadge.classList.remove('hidden');
        }
      }
      setupSearch() {
        document.getElementById('cctv-search').addEventListener('input', e => {
          const term = e.target.value.toLowerCase();
          document.querySelectorAll('.category-group').forEach(g => {
            g.style.display = g.textContent.toLowerCase().includes(term) ? 'block' : 'none';
          });
        });
      }
      toggleFS() {
        const box = document.getElementById('video-box');
        if (!document.fullscreenElement) box.requestFullscreen();
        else document.exitFullscreen();
      }
    }
    const app = new TrafficApp();
  </script>
</body>

</html>
