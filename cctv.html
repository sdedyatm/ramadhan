<!DOCTYPE html>
<html lang="id">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <meta name="theme-color" content="#020617">
  <title>TITAN_SHIELD_V5_STATION</title>

  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdn.jsdelivr.net/npm/hls.js@1.6.15/dist/hls.min.js"></script>

  <style>
    @import url('https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;800&family=Plus+Jakarta+Sans:wght@400;700;800&display=swap');

    :root {
      --neon: #6366f1;
      --bg: #020617;
    }

    body {
      font-family: 'Plus Jakarta Sans', sans-serif;
      background: var(--bg);
      color: #f8fafc;
      height: 100dvh;
      overflow: hidden;
      margin: 0;
    }

    .titan-viewport {
      perspective: 1500px;
      display: flex;
      align-items: center;
      justify-content: center;
      background: radial-gradient(circle at 50% 50%, #0f172a 0%, #020617 100%);
    }

    .titan-frame {
      transform: rotateX(4deg);
      box-shadow: 0 50px 100px -20px rgba(0, 0, 0, 0.8), 0 0 40px rgba(99, 102, 241, 0.1);
      border: 1px solid rgba(255, 255, 255, 0.05);
      border-radius: 32px;
      transition: all 0.6s cubic-bezier(0.23, 1, 0.32, 1);
    }

    .titan-frame:hover {
      transform: rotateX(0deg) scale(1.01);
    }

    .glass-ui {
      background: rgba(15, 23, 42, 0.8);
      backdrop-filter: blur(20px) saturate(180%);
      border: 1px solid rgba(255, 255, 255, 0.08);
    }

    .no-scrollbar::-webkit-scrollbar {
      display: none;
    }

    @keyframes scanline {
      0% {
        top: -100%;
      }

      100% {
        top: 100%;
      }
    }

    .scanline {
      position: absolute;
      width: 100%;
      height: 10px;
      background: linear-gradient(to bottom, transparent, rgba(99, 102, 241, 0.1), transparent);
      animation: scanline 4s linear infinite;
      pointer-events: none;
    }

    .submenu {
      transition: max-height 0.5s ease-out, opacity 0.3s ease;
      max-height: 0;
      overflow: hidden;
      opacity: 0;
    }

    .submenu.active {
      max-height: 1000px;
      opacity: 1;
    }

    .btn-active {
      color: #6366f1 !important;
      background: rgba(99, 102, 241, 0.1);
      border-right: 4px solid #6366f1;
    }
  </style>
</head>

<body class="flex flex-col lg:flex-row">

  <header class="fixed top-4 left-4 right-4 h-16 glass-ui rounded-2xl z-[100] px-6 flex items-center justify-between">
    <div class="flex items-center gap-4">
      <div class="relative w-10 h-10 bg-indigo-600 rounded-xl flex items-center justify-center shadow-[0_0_20px_rgba(99,102,241,0.5)]">
        <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z" stroke-width="2.5" />
        </svg>
      </div>
      <div>
        <h1 class="text-xs font-black tracking-[0.3em] uppercase leading-none">TITAN<span class="text-indigo-400">PROXY</span></h1>
        <p class="text-[8px] font-mono text-indigo-300/60 mt-1 uppercase tracking-widest">Encrypted Stream Protocol v5.0</p>
      </div>
    </div>

    <div class="flex items-center gap-2">
      <button onclick="app.openManual()" class="p-3 hover:bg-white/5 rounded-xl transition-all text-indigo-400"><svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path d="M12 9v3m0 0v3m0-3h3m-3 0H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z" stroke-width="2" />
        </svg></button>
      <button onclick="app.reboot()" class="p-3 hover:bg-red-500/10 rounded-xl transition-all text-slate-500"><svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15" stroke-width="2.5" />
        </svg></button>
    </div>
  </header>

  <main class="flex-1 flex flex-col lg:flex-row pt-24 lg:pt-0 overflow-hidden">
    <section class="flex-1 titan-viewport p-4 lg:p-20 relative">
      <div class="titan-frame relative w-full max-w-6xl aspect-video bg-black overflow-hidden border border-white/10 shadow-2xl">
        <div class="scanline"></div>
        <video id="pwa-player" class="w-full h-full object-cover" playsinline autoplay muted referrerpolicy="no-referrer"></video>

        <div class="absolute inset-0 pointer-events-none p-6 lg:p-10 flex flex-col justify-between border-8 border-white/5">
          <div class="flex justify-between items-start">
            <div id="p-live" class="hidden px-4 py-1 bg-red-600 rounded text-[10px] font-black tracking-[0.2em] shadow-lg shadow-red-900/40">LIVE_HLS_PROXY</div>
            <div class="text-[9px] font-mono text-white/20 bg-black/60 px-2 py-1">BUFFER: <span id="p-buffer">AUTO</span></div>
          </div>
          <div class="p-8 -mx-10 -mb-10 bg-gradient-to-t from-black via-black/40 to-transparent">
            <h2 id="p-name" class="text-2xl lg:text-5xl font-black text-white tracking-tighter uppercase italic opacity-90">Ready to Tunnel</h2>
            <div class="flex items-center gap-4 mt-3 text-[10px] font-bold text-indigo-400">
              <span id="p-cat">SYSTEM_STATION_IDLE</span>
              <span id="p-ip" class="font-mono text-indigo-300/40 tracking-widest italic">WAITING_CONNECTION</span>
            </div>
          </div>
        </div>

        <div id="p-loader" class="hidden absolute inset-0 bg-slate-950 flex flex-col items-center justify-center z-50">
          <div class="w-16 h-16 border-4 border-indigo-500 border-t-transparent rounded-full animate-spin"></div>
          <p class="mt-6 text-[9px] font-mono text-indigo-500 tracking-[0.6em] animate-pulse uppercase">Establishing Proxy Node</p>
        </div>
      </div>
    </section>

    <aside class="w-full lg:w-[400px] bg-slate-900 border-l border-white/5 flex flex-col z-[50]">
      <div class="p-8 border-b border-white/5 bg-slate-950/50">
        <input type="text" id="search" placeholder="SEARCH NODE..." class="w-full bg-black/40 border border-white/10 rounded-2xl px-6 py-5 text-xs font-black tracking-widest focus:border-indigo-500 outline-none transition-all placeholder:text-slate-700">
      </div>
      <div id="node-list" class="flex-1 overflow-y-auto no-scrollbar p-6 space-y-4"></div>
    </aside>
  </main>

  <div id="modal-m" class="fixed inset-0 z-[200] bg-black/95 backdrop-blur-3xl hidden flex items-center justify-center p-6">
    <div class="w-full max-w-xl glass-ui rounded-[3rem] p-10 border border-white/10">
      <h3 class="text-2xl font-black tracking-tighter uppercase mb-8 italic">Manual_Link_Inject</h3>
      <div class="space-y-6">
        <input type="text" id="m-url" placeholder="https://..." class="w-full bg-black border border-white/10 rounded-2xl px-6 py-5 text-xs font-mono text-indigo-400 outline-none">
        <input type="text" id="m-name" placeholder="Identity Label" class="w-full bg-black border border-white/10 rounded-2xl px-6 py-5 text-xs font-black uppercase outline-none">
      </div>
      <button onclick="app.applyM()" class="w-full mt-10 bg-indigo-600 hover:bg-indigo-500 py-6 rounded-2xl text-[10px] font-black uppercase tracking-[0.3em] transition-all">Initialize Tunnel</button>
    </div>
  </div>

  <script>
    const DB = [{
        id: 'isl',
        name: 'ISL & BANDUNG',
        icon: 'ðŸ™ï¸',
        subs: [{
            name: 'ISL',
            url: 'https://cctv.jasamarga.com/hls/pasteur.m3u8'
          },
          {
            name: 'FURUKAWA',
            url: 'https://cctv.jasamarga.com/hls/cileunyi.m3u8'
          },
          {
            name: 'SARIROTI',
            url: 'https://cctv.bandung.go.id/hls/pasupati.m3u8'
          },
          {
            name: 'INDOMARCO',
            url: 'https://cctv.jasamarga.com/hls/gedebage.m3u8'
          },
          {
            name: 'HINO',
            url: 'https://cctv.jasamarga.com/hls/buahbatu.m3u8'
          }
        ]
      },
      {
        id: 'cikampek',
        name: 'Cikampek ~ Bks',
        icon: 'ðŸ›£ï¸',
        subs: [{
            name: 'Cikopo',
            url: 'https://jmlive.jasamarga.com/hls/5/ed6734ac-1cde-4afd-acf9-2658f8e7a254/index.m3u8'
          },
          {
            name: 'Klari Krwg',
            url: 'https://its.binamarga.pu.go.id:8989/play/hls/CT-09/index.m3u8'
          },
          {
            name: 'Simpang Dawuan',
            url: 'https://its.binamarga.pu.go.id:8989/play/hls/CT-10/index.m3u8'
          },
          {
            name: 'Krw Barat',
            url: 'https://its.binamarga.pu.go.id:8989/play/hls/CT-08/index.m3u8'
          },
          {
            name: 'Tambun',
            url: 'https://its.binamarga.pu.go.id:8989/play/hls/CT-01/index.m3u8'
          },
          {
            name: 'Cikarang Barat',
            url: 'https://its.binamarga.pu.go.id:8989/play/hls/CT-04/index.m3u8'
          }
        ]
      },
      {
        id: 'japek',
        name: 'TOL JAPEK',
        icon: 'ðŸ›£ï¸',
        subs: [{
            name: 'KM 10 Cikunir',
            url: 'https://cctv.jasamarga.com/hls/km10.m3u8'
          },
          {
            name: 'KM 21 Tambun',
            url: 'https://cctv.jasamarga.com/hls/km21.m3u8'
          },
          {
            name: 'KM 31 Cikarang',
            url: 'https://cctv.jasamarga.com/hls/km31.m3u8'
          },
          {
            name: 'KM 47 Karawang',
            url: 'https://cctv.jasamarga.com/hls/km47.m3u8'
          },
          {
            name: 'Layang MBZ',
            url: 'https://cctv.jasamarga.com/hls/mbz.m3u8'
          }
        ]
      },
      {
        id: 'tangmer',
        name: 'Tangerang',
        icon: 'ðŸšš',
        subs: [{
            name: 'Bitung',
            url: 'https://cctv-dishub.tangerangkab.go.id/storage/video/01jzvr0hphd8c104283f8g1d9n/01jzvr0hphd8c104283f8g1d9n.m3u8?t=1772043503004'
          },
          {
            name: 'Balaraja Barat',
            url: 'https://cctv.mms-corp.id/balbar-exit/index.m3u8'
          },
          {
            name: 'Exit Merak',
            url: 'https://cctv.mms-corp.id/merak-exit/index.m3u8'
          },
          {
            name: 'Serang Timur',
            url: 'https://cctv.astratol.co.id/hls/serang.m3u8'
          },
          {
            name: 'Cilegon Barat',
            url: 'https://cctv.astratol.co.id/hls/cilegon.m3u8'
          }
        ]
      },
      {
        id: 'merak',
        name: 'MERAK',
        icon: 'ðŸš¢',
        subs: [{
            name: 'Dermaga Eksekutif',
            url: 'https://stream.asdp.id/hls/merak-eksekutif.m3u8'
          },
          {
            name: 'Dermaga 1',
            url: 'https://stream.asdp.id/hls/merak1.m3u8'
          },
          {
            name: 'Dermaga 2',
            url: 'https://stream.asdp.id/hls/merak2.m3u8'
          },
          {
            name: 'Pintu Masuk Port',
            url: 'https://stream.asdp.id/hls/gate-merak.m3u8'
          },
          {
            name: 'Area Parkir',
            url: 'https://stream.asdp.id/hls/parkir-merak.m3u8'
          }
        ]
      },
      {
        id: 'indramayu',
        name: 'INDRAMAYU',
        icon: 'ðŸŒ¾',
        subs: [{
            name: 'Sasak Sewo',
            url: 'https://streamer.indramayukab.go.id/memfs/4bb80c7d-72d5-47d2-a10e-b4fde7862205.m3u8'
          },
          {
            name: 'Jatibarang',
            url: 'https://dishub.indramayukab.go.id/jatibarang.m3u8'
          },
          {
            name: 'Karangampel',
            url: 'https://dishub.indramayukab.go.id/karangampel.m3u8'
          },
          {
            name: 'Eretan',
            url: 'https://streamer.indramayukab.go.id/memfs/4bb80c7d-72d5-47d2-a10e-b4fde7862205.m3u8'
          },
          {
            name: 'Losarang',
            url: 'https://dishub.indramayukab.go.id/losarang.m3u8'
          }
        ]
      },
      {
        id: 'cirebon',
        name: 'CIREBON',
        icon: 'ðŸ¯',
        subs: [{
            name: 'Plumbon',
            url: 'https://cctv.jasamarga.com/hls/plumbon.m3u8'
          },
          {
            name: 'Kanci',
            url: 'https://cctv.jasamarga.com/hls/kanci.m3u8'
          },
          {
            name: 'Palimanan',
            url: 'https://cctv.jasamarga.com/hls/palimanan.m3u8'
          },
          {
            name: 'Plered',
            url: 'https://dishub.cirebonkota.go.id/plered.m3u8'
          },
          {
            name: 'Harjamukti',
            url: 'https://dishub.cirebonkota.go.id/harjamukti.m3u8'
          }
        ]
      },
      {
        id: 'semarang',
        name: 'SEMARANG',
        icon: 'ðŸ›ï¸',
        subs: [{
            name: 'Simpang Lima',
            url: 'https://cctv.semarangkota.go.id/simpang5.m3u8'
          },
          {
            name: 'Kaligawe',
            url: 'https://cctv.semarangkota.go.id/kaligawe.m3u8'
          },
          {
            name: 'Krapyak',
            url: 'https://cctv.jasamarga.com/hls/krapyak.m3u8'
          },
          {
            name: 'Jatingaleh',
            url: 'https://cctv.jasamarga.com/hls/jatingaleh.m3u8'
          },
          {
            name: 'Banyumanik',
            url: 'https://cctv.jasamarga.com/hls/banyumanik.m3u8'
          }
        ]
      },
      {
        id: 'surabaya',
        name: 'SURABAYA',
        icon: 'ðŸ¦ˆ',
        subs: [{
            name: 'Waru',
            url: 'https://cctv.jasamarga.com/hls/waru.m3u8'
          },
          {
            name: 'Gunung Sari',
            url: 'https://cctv.jasamarga.com/hls/gunungsari.m3u8'
          },
          {
            name: 'Dupak',
            url: 'https://cctv.jasamarga.com/hls/dupak.m3u8'
          },
          {
            name: 'Suramadu',
            url: 'https://dishub.surabaya.go.id/suramadu.m3u8'
          },
          {
            name: 'Perak',
            url: 'https://dishub.surabaya.go.id/perak.m3u8'
          }
        ]
      },
      {
        id: 'palembang',
        name: 'PALEMBANG',
        icon: 'ðŸŒ‰',
        subs: [{
            name: 'Ampera',
            url: 'https://dishub.palembang.go.id/ampera.m3u8'
          },
          {
            name: 'Jakabaring',
            url: 'https://dishub.palembang.go.id/jakabaring.m3u8'
          },
          {
            name: 'KM 12',
            url: 'https://cctv.hutamakarya.com/palembang12.m3u8'
          },
          {
            name: 'Kramasan',
            url: 'https://cctv.hutamakarya.com/kramasan.m3u8'
          },
          {
            name: 'Indralaya',
            url: 'https://cctv.hutamakarya.com/indralaya.m3u8'
          }
        ]
      },
      {
        id: 'medan',
        name: 'MEDAN',
        icon: 'ðŸ¢',
        subs: [{
            name: 'Belawan',
            url: 'https://cctv.jasamarga.com/hls/belawan.m3u8'
          },
          {
            name: 'Tanjung Morawa',
            url: 'https://cctv.jasamarga.com/hls/tamora.m3u8'
          },
          {
            name: 'Maimun',
            url: 'https://atcs.medan.id/hls/maimun.m3u8'
          },
          {
            name: 'Simpang Pos',
            url: 'https://atcs.medan.id/hls/simpangpos.m3u8'
          }
        ]
      }
    ];
    class TitanSystem {
      constructor() {
        this.video = document.getElementById('pwa-player');
        this.hls = null;
        this.init();
      }
      init() {
        this.renderNodes();
        this.setupSensors();
      }
      renderNodes() {
        const list = document.getElementById('node-list');
        list.innerHTML = DB.map(group => `
          <div class="glass-ui rounded-[2rem] overflow-hidden mb-4 border border-white/5">
            <button onclick="app.toggleSub('${group.id}')" class="w-full p-6 flex items-center justify-between hover:bg-white/5 transition-all">
              <div class="flex items-center gap-4">
                <span class="text-2xl">${group.icon}</span>
                <span class="text-[10px] font-black tracking-widest text-white/80 uppercase">${group.name}</span>
              </div>
              <svg id="ic-${group.id}" class="w-4 h-4 text-white/20 transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path d="M19 9l-7 7-7-7" stroke-width="3"/></svg>
            </button>
            <div id="sb-${group.id}" class="submenu px-4 bg-black/20">
              ${group.subs.map(node => `
                <button onclick="app.connect('${btoa(node.url)}', '${node.name}', '${group.name}', this)" class="node-btn w-full text-left p-4 text-[9px] font-bold uppercase tracking-tight text-slate-500 hover:text-indigo-400 rounded-xl mb-1 flex items-center gap-3 transition-all">
                  <span class="w-1.5 h-1.5 bg-white/10 rounded-full"></span> ${node.name}
                </button>
              `).join('')}
            </div>
          </div>
        `).join('');
      }
      async connect(eUrl, name, cat, btn = null) {
        if (navigator.vibrate) navigator.vibrate(10);
        try {
          const rawUrl = atob(eUrl);
          const proxyUrl = `${rawUrl}${rawUrl.includes('?') ? '&' : '?'}v=${Date.now()}`;
          document.getElementById('p-loader').classList.remove('hidden');
          document.getElementById('p-name').innerText = name;
          document.getElementById('p-cat').innerText = `NODE: ${cat}`;
          document.getElementById('p-ip').innerText = `PROXY_ESTABLISHED`;
          if (btn) {
            document.querySelectorAll('.node-btn').forEach(b => b.classList.remove('btn-active'));
            btn.classList.add('btn-active');
          }
          if (this.hls) this.hls.destroy();
          if (Hls.isSupported()) {
            this.hls = new Hls({
              enableWorker: true,
              lowLatencyMode: true
            });
            this.hls.loadSource(proxyUrl);
            this.hls.attachMedia(this.video);
            this.hls.on(Hls.Events.MANIFEST_PARSED, () => {
              this.video.play();
              document.getElementById('p-loader').classList.add('hidden');
              document.getElementById('p-live').classList.remove('hidden');
            });
            this.hls.on(Hls.Events.ERROR, (e, data) => {
              if (data.fatal) this.handleFailure();
            });
          }
        } catch (err) {
          this.handleFailure();
        }
      }
      toggleSub(id) {
        const el = document.getElementById(`sb-${id}`);
        const ic = document.getElementById(`ic-${id}`);
        const isActive = el.classList.contains('active');
        document.querySelectorAll('.submenu').forEach(s => s.classList.remove('active'));
        document.querySelectorAll('header ~ main aside svg').forEach(s => s.style.transform = 'rotate(0deg)');
        if (!isActive) {
          el.classList.add('active');
          ic.style.transform = 'rotate(180deg)';
        }
      }
      handleFailure() {
        document.getElementById('p-loader').classList.add('hidden');
        document.getElementById('p-name').innerText = "NODE_OFFLINE";
      }
      setupSensors() {
        document.getElementById('search').addEventListener('input', (e) => {
          const q = e.target.value.toLowerCase();
          document.querySelectorAll('#node-list > div').forEach(el => {
            el.style.display = el.textContent.toLowerCase().includes(q) ? 'block' : 'none';
          });
        });
      }
      openManual() {
        document.getElementById('modal-m').classList.toggle('hidden');
      }
      applyM() {
        const u = document.getElementById('m-url').value;
        const n = document.getElementById('m-name').value || "MANUAL_INJECT";
        if (u) {
          this.connect(btoa(u), n, "INJECTION");
          this.openManual();
        }
      }
      reboot() {
        window.location.reload(true);
      }
    }
    const app = new TitanSystem();
  </script>
</body>

</html>
